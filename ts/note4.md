#装饰器  decorator

#解决的问题

  装饰器： 能够带来额外的信息量，分离关注点

- 在定义某个东西时，最清楚它的规则
- 重复代码的问题

  上述两个问题产生的根源： 某些信息在定义时，能够附加的信息量有限

  作用： 为某些属性  类  参数 方法提供元数据信息

  元数据： 就是描述数据的数据

##装饰器的本质

在js中，装饰器本质是一个函数。（参与运行）

## 类装饰器

类装饰器的本质是一个函数，该函数接收一个参数，表示类本身（构造函数本身）

- 使用： @得到一个函数  还要在配置中设置experimentalDecorators为true。开启试验性
- 在ts中，如何约束一个变量为类？
1. Function  类的本质是一个函数，函数的类型是Function
2. new (参数) => object

装饰器函数的运行时间：在类定义后直接运行

类装饰器可以具有的返回值：
- void: 仅运行函数
- 返回一个新的类：会将新的类替换掉装饰目标

多个装饰器的情况：
运行顺序从下到上 （面试题： ）


## 成员装饰器

- 属性
属性装饰器也是一个函数，该函数需要两个参数： 
1. 如果是静态属性，则为类本身（构造对象）；如果是实例属性（通过new一个对象来调用的），则为类的原型
2. 固定为一个字符串，表示属性名

- 方法
方法装饰器也是一个函数，该函数需要三个参数
1. 如果是静态属性，则为类本身（构造对象）；如果是实例属性（通过new一个对象来调用的），则为类的原型
2. 固定为一个字符串，表示一个方法名
3. 描述符对象

可以有多少装饰器修饰

##练习： 类和属性的装饰器练习

## reflect-metadata 库
该库的作用： 保存元数据
yarn add reflect-metadata

## class-validator（验证） 和 class-transformer 库，需要先安装reflect-metadata的库
yarn add class-validator  

class-transformer：可以把一个平面对象转换成类对象

## 补充
- 参数装饰器  依赖注入 依赖倒置（后端/大型项目）
要求函数有三个参数：
1. 如果方法是静态的，则为类本身；如果方法是实例方法，则为类的原型
2. 方法名称
3. 在参数列表中的索引

- 关于ts自动注入的元数据


- aop

编程方式，属于面向对象开发。
将一些在你业务中共同出现的功能模块，横向切分，以达到分离关注点的目的

#类型演算

> 根据已知的信息，计算出新的类型

## 三个关键字

- typeof（把一个变量约束成一个构造函数）
TS中的typeof，书写的位置在类型约束的位置上。

表示： 获取某个数据的类型
当typeof作用于类的时候，得到的类型，是该类的构造函数。

- keyof

作用于类  接口  类型别名 ，用于获取其他类型中的所有成员名组成的联合类型



-in 跟keyof联用： 限制某个索引类型的
