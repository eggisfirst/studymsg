<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body>
  <script src="./2.js"></script>
  <script>
    const pro = new MyPromise((resolve,reject) => {
      resolve(1)
    })

    pro.then(res => {
      console.log(123312,res)
    })
    // function biaobai(god) {
    //   return new Promise((res, rej) => {
    //     setTimeout(() => {
    //       console.log(`向女神${god}发送短信`)
    //       if (Math.random() < 0.3) {
    //         console.log(`${god}同意`)
    //         res(true)
    //       }
    //       else {
    //         console.log(`${god}拒绝`)
    //         res(false)
    //       }
    //     }, Math.floor(Math.random(3000 - 1000) + 1000));
    //   })
    // }

    // let hasAgree = false
    // const proms = []
    // for (let i = 0; i < 10; i++) {
    //   const pro = biaobai(`女神${i}`).then(res => {
    //     if (res) {
    //       if (hasAgree) {
    //         console.log('发错了短信')
    //       } else {
    //         hasAgree = true
    //         console.log(`太开心了`)
    //       }
    //     }
    //     return res
    //   })
    //   console.log(pro)
    //   proms.push(pro)
    // }
    // const pros = Promise.all(proms)
    // pros.then(res => {
    //   console.log('日志', res)
    // })

    // function getRandom(min, max) {
    //   return Math.floor(Math.random() * (max - min)) + min;
    // }
    // const proms = [];
    // for (let i = 0; i < 10; i++) {
    //   proms.push(new Promise((resolve, reject) => {
    //     setTimeout(() => {
    //       if (Math.random() < 0.5) {
    //         console.log(i, "完成");
    //         resolve(i);
    //       } else {
    //         console.log(i, "失败")
    //         reject(i);
    //       }
    //     }, getRandom(1000, 5000));
    //   }))
    // }
    // //等到所有的promise变成resolved状态后输出: 全部完成
    // const pro = Promise.all(proms)
    // pro.then(datas => {
    //   console.log("全部完成", datas);
    // })
    // pro.catch(err => {
    //   console.log("有失败的", err);
    // })
    // console.log(proms);
    // const proms = []
    // for (let i = 0; i < 10; i++) {
    //   const pro = new Promise((res,rej) => {
    //     setTimeout(() => {
    //       if(Math.random() < 0.1) {
    //         console.log(i,'success')
    //         res(i)
    //       }else {
    //         console.log(i,'fail')
    //         rej(i)
    //       }
    //     }, Math.floor(Math.random(3000 - 1000) + 1000));
    //   })    
    //   proms.push(pro)  
    // }
    // const pros = Promise.all(proms)
    // pros.then(res => {
    //   console.log(res,'都成功了')
    // })
    // pros.catch(err => {
    //   console.log(err,'有失败的')
    // })
    // console.log(proms)

    // const pros1 = Promise.race(proms)
    // pros1.then(res => {
    //   console.log(res,'有成功了')
    // })
    // pros1.catch(err => {
    //   console.log(err,'有失败的')
    // })
  </script>
</body>

</html>